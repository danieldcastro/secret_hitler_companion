name: secret_hitler_companion
description: "A new Flutter project."

publish_to: "none"

version: 1.0.0+1

environment:
  sdk: ^3.9.2

# Como você está usando o root como package, não precisa da seção workspace
# A configuração useRootAsPackage: true no melos cuida disso

dependencies:
  cupertino_icons: ^1.0.8
  flutter:
    sdk: flutter
  flutter_bloc: ^9.1.1
  flutter_modular: ^6.4.1
  flutter_localizations:
    sdk: flutter
  nilts: ^0.24.0

dev_dependencies:
  flutter_lints: ^5.0.0
  flutter_test:
    sdk: flutter
  melos: ^7.1.0

flutter:
  uses-material-design: true

melos:
  useRootAsPackage: true
  
  env:
    PROD_FLAGS: "--release --flavor prod --dart-define env=prod --dart-define-from-file env/env_prod.json"
    QA_FLAGS: "--release --flavor qa --dart-define env=qa --dart-define-from-file env/env_qa.json"
    PROD_FLAGS_IOS: "--release --flavor pro --dart-define env=prod --dart-define-from-file=env/env_prod.json"
    QA_FLAGS_IOS: "--release --flavor dev --dart-define env=qa --dart-define-from-file=env/env_qa.json"

  scripts:
    clean:
      description: Limpa o projeto Flutter
      run: flutter clean

    get:
      description: Roda flutter pub get
      run: flutter pub get

    podsRepair:
      description: Repara pods do iOS
      run: |
        melos run clean
        cd ios && pod deintegrates
        cd ios && rm -rf Podfile.lock
        melos run get
        cd ios && pod install

    build:
      description: Build genérico
      run: flutter build

    buildBundle:
      description: Build AppBundle genérico
      run: flutter build appbundle

    buildApk:
      description: Build APK genérico
      run: flutter build apk

    buildIos:
      description: Build iOS genérico
      run: flutter build ios

    bundleProd:
      description: Build AppBundle produção
      run: flutter build appbundle $PROD_FLAGS

    bundleQa:
      description: Build AppBundle QA
      run: flutter build appbundle $QA_FLAGS

    apkProd:
      description: Build APK produção
      run: flutter build apk $PROD_FLAGS

    apkQa:
      description: Build APK QA
      run: flutter build apk $QA_FLAGS

    iosProd:
      description: Build iOS produção
      run: flutter build ios $PROD_FLAGS_IOS

    iosQa:
      description: Build iOS QA
      run: flutter build ios $QA_FLAGS_IOS

    ipaProd:
      description: Build IPA produção
      run: flutter build ipa $PROD_FLAGS_IOS

    ipaQa:
      description: Build IPA QA
      run: flutter build ipa $QA_FLAGS_IOS